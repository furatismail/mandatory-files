import { HttpClient } from '@angular/common/http';
import { Injectable, InjectionToken } from '@angular/core';
import { Observable } from 'rxjs';
import { TYPE } from '../app.module';
import { User } from '../interfaces/user.interface';

@Injectable({
  providedIn: 'root'
})
export class UsersService {

  constructor(private httpClient: HttpClient) { }

  getUsers() : Observable<Array<User>> {
    return this.httpClient.get<Array<User>>('https://jsonplaceholder.typicode.com/users');
  }
}

export class TestService2 {
  sayHello() {
    console.log(`From TestService2 --> Hello`);
  }
}

export class TestService3 {
  sayHello() {
    console.log(`From TestService3 --> Hello`);
  }
}

export function xyzFactory(http: HttpClient, type: any) {
  console.log(!!http);
  console.log(type)

  
  if(type === '2') {
    return new TestService2();
  }

  return new TestService3();

}


@Injectable({
  providedIn: 'root',
  useFactory: xyzFactory,
  deps: [HttpClient, TYPE],
})
export class TestService {
  sayHello() {
    console.log(`From TestService --> Hello`);
  }
}
